From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: Raine Makelainen <raine.makelainen@jolla.com>
Date: Mon, 10 May 2021 22:45:37 +0300
Subject: [PATCH] m32 x86

Signed-off-by: Raine Makelainen <raine.makelainen@jolla.com>
---
 build/moz.configure/rust.configure | 1 +
 third_party/rust/cc/src/lib.rs     | 1 -
 2 files changed, 1 insertion(+), 1 deletion(-)

diff --git a/build/moz.configure/rust.configure b/build/moz.configure/rust.configure
index e5122d6b86e9..9208926e24a2 100644
--- a/build/moz.configure/rust.configure
+++ b/build/moz.configure/rust.configure
@@ -408,6 +408,7 @@ rust_host_triple = rust_triple_alias(host, host_c_compiler)
 
 @depends(host, rust_host_triple, rustc_info.host)
 def validate_rust_host_triple(host, rust_host, rustc_host):
+    return True
     if rust_host != rustc_host:
         if host.alias == rust_host:
             configure_host = host.alias
diff --git a/third_party/rust/cc/src/lib.rs b/third_party/rust/cc/src/lib.rs
index 621d31d6b8a9..ed1f60d10e88 100644
--- a/third_party/rust/cc/src/lib.rs
+++ b/third_party/rust/cc/src/lib.rs
@@ -1436,7 +1436,6 @@ impl Build {
             }
             ToolFamily::Gnu => {
                 if target.contains("i686") || target.contains("i586") {
-                    cmd.args.push("-m32".into());
                 } else if target == "x86_64-unknown-linux-gnux32" {
                     cmd.args.push("-mx32".into());
                 } else if target.contains("x86_64") || target.contains("powerpc64") {
-- 
2.30.2

